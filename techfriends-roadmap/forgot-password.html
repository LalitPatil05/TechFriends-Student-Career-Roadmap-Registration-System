<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - TechFriends</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/auth.css">
    <link rel="stylesheet" href="styles/forgot-password.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-graduation-cap"></i>
                <span>TechFriends</span>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="roadmap.html" class="nav-link">Roadmaps</a>
                <a href="login.html" class="nav-link">Login</a>
                <a href="register.html" class="nav-link register-btn">Get Started</a>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Forgot Password Section -->
    <section class="auth-section">
        <div class="auth-container">
            <div class="auth-card">
                <!-- Progress Steps -->
                <div class="password-reset-steps">
                    <div class="step-indicator">
                        <div class="step active" data-step="1">
                            <div class="step-number">1</div>
                            <span>Verify Email</span>
                        </div>
                        <div class="step-connector"></div>
                        <div class="step" data-step="2">
                            <div class="step-number">2</div>
                            <span>Security Check</span>
                        </div>
                        <div class="step-connector"></div>
                        <div class="step" data-step="3">
                            <div class="step-number">3</div>
                            <span>New Password</span>
                        </div>
                        <div class="step-connector"></div>
                        <div class="step" data-step="4">
                            <div class="step-number">4</div>
                            <span>Complete</span>
                        </div>
                    </div>
                </div>

                <!-- Step 1: Email Verification -->
                <div class="reset-step active" id="step1">
                    <div class="step-header">
                        <div class="step-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <h2>Reset Your Password</h2>
                        <p>Enter your email address and we'll send you a verification code</p>
                    </div>

                    <form class="auth-form" id="emailForm">
                        <div class="form-group">
                            <label for="email">
                                <i class="fas fa-envelope"></i>
                                Email Address
                            </label>
                            <input 
                                type="email" 
                                id="email" 
                                name="email" 
                                placeholder="Enter your email address"
                                required
                            >
                            <div class="error-message" id="emailError"></div>
                        </div>

                        <div class="form-options">
                            <div class="security-tip">
                                <i class="fas fa-shield-alt"></i>
                                <span>We'll send a 6-digit code to verify your identity</span>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-full btn-loading" id="sendCodeBtn">
                            <span class="btn-text">Send Verification Code</span>
                            <div class="btn-spinner"></div>
                        </button>
                    </form>

                    <div class="auth-footer">
                        <p>Remember your password? <a href="login.html" class="link">Back to Login</a></p>
                    </div>
                </div>

                <!-- Step 2: Code Verification -->
                <div class="reset-step" id="step2">
                    <div class="step-header">
                        <div class="step-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h2>Enter Verification Code</h2>
                        <p>We sent a 6-digit code to <strong id="userEmail">user@example.com</strong></p>
                        <div class="code-timer">
                            <i class="fas fa-clock"></i>
                            <span id="timer">05:00</span>
                        </div>
                    </div>

                    <form class="auth-form" id="codeForm">
                        <div class="form-group">
                            <label>Verification Code</label>
                            <div class="code-inputs">
                                <input type="text" maxlength="1" class="code-input" data-index="1">
                                <input type="text" maxlength="1" class="code-input" data-index="2">
                                <input type="text" maxlength="1" class="code-input" data-index="3">
                                <input type="text" maxlength="1" class="code-input" data-index="4">
                                <input type="text" maxlength="1" class="code-input" data-index="5">
                                <input type="text" maxlength="1" class="code-input" data-index="6">
                            </div>
                            <div class="error-message" id="codeError"></div>
                        </div>

                        <div class="form-options">
                            <div class="resend-code">
                                <span>Didn't receive the code?</span>
                                <button type="button" class="btn-text" id="resendCode" disabled>
                                    Resend code in <span id="resendTimer">60</span>s
                                </button>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-full btn-loading" id="verifyCodeBtn" disabled>
                            <span class="btn-text">Verify Code</span>
                            <div class="btn-spinner"></div>
                        </button>
                    </form>

                    <div class="auth-footer">
                        <button type="button" class="btn-text" onclick="goToStep(1)">
                            <i class="fas fa-arrow-left"></i>
                            Use different email
                        </button>
                    </div>
                </div>

                <!-- Step 3: New Password -->
                <div class="reset-step" id="step3">
                    <div class="step-header">
                        <div class="step-icon">
                            <i class="fas fa-lock"></i>
                        </div>
                        <h2>Create New Password</h2>
                        <p>Your new password must be different from previous used passwords</p>
                    </div>

                    <form class="auth-form" id="passwordForm">
                        <div class="form-group">
                            <label for="newPassword">
                                <i class="fas fa-lock"></i>
                                New Password
                            </label>
                            <div class="password-input">
                                <input 
                                    type="password" 
                                    id="newPassword" 
                                    name="newPassword" 
                                    placeholder="Enter new password"
                                    required
                                >
                                <button type="button" class="password-toggle">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="error-message" id="newPasswordError"></div>
                            <div class="password-strength">
                                <div class="strength-bar">
                                    <div class="strength-fill" id="strengthFill"></div>
                                </div>
                                <span class="strength-text" id="strengthText">Weak</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="confirmPassword">
                                <i class="fas fa-lock"></i>
                                Confirm New Password
                            </label>
                            <div class="password-input">
                                <input 
                                    type="password" 
                                    id="confirmPassword" 
                                    name="confirmPassword" 
                                    placeholder="Confirm new password"
                                    required
                                >
                                <button type="button" class="password-toggle">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="error-message" id="confirmPasswordError"></div>
                        </div>

                        <div class="password-requirements">
                            <h4>Password Requirements:</h4>
                            <ul>
                                <li class="requirement" data-requirement="length">
                                    <i class="fas fa-check"></i>
                                    At least 8 characters
                                </li>
                                <li class="requirement" data-requirement="uppercase">
                                    <i class="fas fa-check"></i>
                                    One uppercase letter
                                </li>
                                <li class="requirement" data-requirement="lowercase">
                                    <i class="fas fa-check"></i>
                                    One lowercase letter
                                </li>
                                <li class="requirement" data-requirement="number">
                                    <i class="fas fa-check"></i>
                                    One number
                                </li>
                                <li class="requirement" data-requirement="special">
                                    <i class="fas fa-check"></i>
                                    One special character
                                </li>
                            </ul>
                        </div>

                        <button type="submit" class="btn btn-primary btn-full btn-loading" id="resetPasswordBtn">
                            <span class="btn-text">Reset Password</span>
                            <div class="btn-spinner"></div>
                        </button>
                    </form>

                    <div class="auth-footer">
                        <button type="button" class="btn-text" onclick="goToStep(2)">
                            <i class="fas fa-arrow-left"></i>
                            Back to code verification
                        </button>
                    </div>
                </div>

                <!-- Step 4: Success -->
                <div class="reset-step" id="step4">
                    <div class="success-screen">
                        <div class="success-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h2>Password Reset Successful!</h2>
                        <p>Your password has been reset successfully. You can now login with your new password.</p>
                        
                        <div class="success-actions">
                            <a href="login.html" class="btn btn-primary btn-large">
                                <i class="fas fa-sign-in-alt"></i>
                                Login to Your Account
                            </a>
                            <a href="index.html" class="btn btn-outline">
                                <i class="fas fa-home"></i>
                                Back to Homepage
                            </a>
                        </div>

                        <div class="security-notice">
                            <i class="fas fa-info-circle"></i>
                            <p>For security reasons, we recommend you sign out of all other devices after changing your password.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Sidebar -->
            <div class="auth-sidebar">
                <div class="sidebar-content">
                    <h3>Account Security</h3>
                    <div class="security-features">
                        <div class="security-feature">
                            <i class="fas fa-shield-check"></i>
                            <div>
                                <h4>Secure Process</h4>
                                <p>Multi-step verification ensures your account safety</p>
                            </div>
                        </div>
                        <div class="security-feature">
                            <i class="fas fa-clock"></i>
                            <div>
                                <h4>Time-sensitive Codes</h4>
                                <p>Verification codes expire for added security</p>
                            </div>
                        </div>
                        <div class="security-feature">
                            <i class="fas fa-user-lock"></i>
                            <div>
                                <h4>Account Protection</h4>
                                <p>We never share your information with third parties</p>
                            </div>
                        </div>
                    </div>

                    <div class="security-tips">
                        <h4>Security Tips:</h4>
                        <ul>
                            <li>Use a strong, unique password</li>
                            <li>Enable two-factor authentication</li>
                            <li>Never share your password</li>
                            <li>Update password regularly</li>
                        </ul>
                    </div>

                    <div class="help-section">
                        <h4>Need Help?</h4>
                        <p>If you're having trouble resetting your password, contact our support team.</p>
                        <a href="mailto:support@techfriends.com" class="btn btn-outline btn-sm">
                            <i class="fas fa-envelope"></i>
                            Contact Support
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Security Verification Modal -->
    <div id="securityModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Additional Security Check</h3>
                <button class="modal-close" onclick="closeSecurityModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="security-check">
                    <div class="security-question">
                        <p>To ensure account security, please answer your security question:</p>
                        <h4 id="securityQuestion">What was the name of your first pet?</h4>
                        <input type="text" id="securityAnswer" placeholder="Enter your answer" class="form-input">
                        <div class="error-message" id="securityError"></div>
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-secondary" onclick="closeSecurityModal()">
                            Cancel
                        </button>
                        <button class="btn btn-primary" onclick="verifySecurityAnswer()">
                            Verify Answer
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="scripts/script.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/forgot-password.js"></script>
</body>
</html>